@import 'base/constants';
@import 'components/header-anim';
@import 'base/mixins';

$color-greeting: $color-text;
$color-name: $color-accent;
$color-vocation: $color-text-secondary;

$font-size-greeting: 2rem;
$font-size-name: 4rem;
$font-size-vocation: 1.8rem;

$intro-top-margin: clamp(2px, 5rem, 20vh);
$section-margin-top: clamp(3rem, 8vw, 5rem);
$subsection-margin-top: $spacing-lg;

// Section-specific variables
$section-padding: $spacing-xl;
$section-padding-mobile: $spacing-lg;
$section-border-radius: $radius-xl;
$section-entrance-offset: 35px;

// Card variables
$card-gap: $spacing-lg;
$card-padding: $spacing-lg;
$cards-per-row: 3;

#intro {
    align-items: center;

    #text {
        font-family: $font-secondary;
        font-weight: $font-weight-bold;
        display: flex;
        flex-direction: column;
        white-space: nowrap;

        #greeting {
            color: $color-greeting;
            font-size: $font-size-greeting;
        }

        #name {
            color: $color-name;
            font-size: $font-size-name;
            line-height: 1;
        }

        #vocation {
            color: $color-vocation;
            font-size: $font-size-vocation;
            line-height: 1;
        }

        .text-shimmer-char {
            display: inline-block;
            opacity: 0;
            transform: translateY(-3px);
            filter: blur(2px);
            transition: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);

            &.text-shimmer-char.in {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
        }

        @include desktop {
            #greeting .expand-char {
                margin-right: 0.17em;
                transform: perspective(200px) rotateY(-180deg) scale(1.1) !important;
            }
            #name .expand-char {
                margin-right: 0.12em;
                transform: perspective(200px) rotateY(20deg) scale(1.1) !important;
                text-shadow: 0 0 15px $color-accent-transparent-30;
            }
            #vocation .expand-char {
                margin-right: 0.15em;
                color: $color-accent-light;
            }
        }
    }

    #pfp-container {
        img#pfp {
            width: 256px;
            height: 256px;

            @include desktop {
                cursor: pointer;
            }

            @include motion {
                opacity: 0;
                transform: scale(0.3) rotate(180deg);
                filter: blur(20px);
                animation: pfpEntrance 1.2s cubic-bezier(0.4, 0.0, 0.2, 1) 0.1s forwards;
            }
        }
    }
}

@include notMobile {
    #intro {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr;
        margin-top: $intro-top-margin;
        width: 100%;

        #text {
            justify-self: end;
            text-align: right;
            padding-right: 2rem;
        }

        #pfp-container {
            justify-content: flex-start;
            padding-left: 2rem;
        }
    }
}

@include mobile {
    #intro {
        display: flex;
        flex-direction: column;

        #text {
            margin-top: 1rem;
            text-align: center;
        }

        #pfp-container {
            margin-top: 3rem;
        }
    }
}

@keyframes pfpEntrance {
    to {
        opacity: 1;
        transform: scale(1) rotate(0deg);
        filter: blur(0)
    }
}

@keyframes sectionEntrance {
    to {
        opacity: 1;
        transform: translate(0);
    }
}

// Content sections styling
section:not(#intro) {
    margin-top: $section-margin-top;
    padding: $section-padding;
    border-radius: $section-border-radius;
    transition: $transition-transform-shadow;

    @include motion {
        opacity: 0;

        @include tall {
            &:nth-child(even) {
                transform: translateX($section-entrance-offset * -1);
            }
            &:nth-child(odd) {
                transform: translateX($section-entrance-offset);
            }
        }

        @include notTall {
            transform: translateY($section-entrance-offset);
        }

        animation: sectionEntrance 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        animation-delay: calc(0.2s + var(--child-animation-delay));
    }

    @include mobile {
        padding: $section-padding-mobile;
        border-radius: $radius-lg;
    }

    h2 {
        margin-bottom: $spacing-md;
        color: $color-text;
    }

    p {
        margin-bottom: $spacing-md;
        color: $color-text-secondary;
        line-height: 1.6;
    }

    .link-capsule {
        display: inline-block;
        margin-top: $spacing-sm;
        padding: $spacing-xs $spacing-md;
        background: $color-accent-transparent-10;
        border: $border-accent;
        border-radius: $radius-round;
        transition: $transition-default;
        font-weight: $font-weight-normal;
        text-decoration: none;

        &:hover {
            background: $color-accent-transparent-20;
            transform: translateY(-1px);
            text-decoration: none;
        }
    }
}

// Distinctive section backgrounds
#about {
    background: linear-gradient(135deg, $color-panel, mix($color-panel, $color-background, 8%));
    border: $border-standard-2px;
}

#build {
    background: linear-gradient(135deg, mix($color-accent, $color-background, 15%), mix($color-panel, $color-background, 9%));
    border: $border-accent-t-2px;
}

#write {
    background: linear-gradient(135deg, mix($color-text, $color-background, 5%), mix($color-panel, $color-background, 85%));
    border: $border-light-2px;
}

#contact {
    background: linear-gradient(-45deg, mix($color-accent, $color-background, 12%), mix($color-panel, $color-background, 50%));
    border: $border-accent-t-2px;
}

// Cards styling
#projects, #posts {
    margin-top: $subsection-margin-top;

    h3 {
        margin-bottom: $spacing-md;
        color: $color-text;
        font-size: $font-size-h4;
    }

    .cards-grid {
        display: grid;
        grid-template-columns: repeat($cards-per-row, 1fr);
        gap: $card-gap;

        @include mobile {
            grid-template-columns: 1fr;
            gap: $spacing-md;
        }

        .card {
            background: $color-card;
            border-radius: $radius-lg;
            border: $border-light;
            transition: $transition-transform-shadow;
            box-shadow: $shadow-standard;
            overflow: hidden;

            &:hover {
                transform: translateY(-3px) scale(1.02);
                box-shadow: $shadow-standard-hover;
                border-color: $color-accent-transparent-30;
            }

            .card-link {
                display: block;
                color: $color-text;
                text-decoration: none;
                height: 100%;
                box-sizing: border-box;

                .card-image {
                    width: 100%;
                    height: 160px;
                    object-fit: cover;
                    border-radius: $radius-lg $radius-lg 0 0;
                    transition: $transition-default;
                }

                h4 {
                    margin: 0 0 $spacing-xs 0;
                    padding: 0 $card-padding;
                    padding-top: $spacing-md;
                    font-size: $font-size-h4;
                    font-family: $font-secondary;
                    color: $color-link;
                    line-height: 1.3;
                }

                p {
                    margin: 0;
                    padding: 0 $card-padding $card-padding;
                    font-size: $font-size-sm;
                    color: $color-text-secondary;
                    line-height: 1.5;
                }

                &:hover {
                    text-decoration: none;

                    .card-image {
                        transform: scale(1.05);
                    }

                    h4 {
                        color: $color-accent-light;
                    }
                }
            }
        }
    }
}

main {
    margin-bottom: $card-gap;

    @include mobile {
        max-width: 92vw;
    }
}
