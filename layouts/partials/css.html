{{- with (. | printf "css/%s") -}}
{{- $ext := path.Ext . -}}
{{- $asset := resources.Get . -}}
{{- if not $asset -}}
    {{- errorf "Asset not found: %s" . -}}
{{- end -}}
{{- if not (or (eq $ext ".css") (eq $ext ".scss")) }}
    {{- errorf "Non-style asset used with css partial: %s" . -}}
{{- end -}}
{{- $processed := $asset -}}
{{- if eq $ext ".scss" -}}
    {{- $processed = $processed | toCSS -}}
{{- end -}}
{{- $processed = $processed | minify | fingerprint "md5" -}}
<link rel="stylesheet" href="{{ $processed.Permalink }}" />
{{- end -}}
