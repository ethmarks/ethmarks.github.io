{{- $header := partial "header.html" . | jsonify -}}
{{- $footer := partial "footer.html" . | jsonify -}}
{{- $js := printf `// Ethmarks Web Components
// Generated automatically from Hugo partials

class EthmarksHeader extends HTMLElement {
  connectedCallback() {
    this.innerHTML = %s;
  }
}

class EthmarksFooter extends HTMLElement {
  connectedCallback() {
    this.innerHTML = %s;

    // Add overflow detection functionality
    function updateOverflowClasses() {
      const heightOverflowClass = "height-overflow";
      const body = document.body;
      const containerHeight = window.innerHeight;
      const contentHeight = Math.max(
        document.documentElement.scrollHeight,
        document.body.scrollHeight
      );

      if (contentHeight === 0) { return; }

      if (contentHeight > containerHeight) {
        body.classList.add(heightOverflowClass);
      } else {
        body.classList.remove(heightOverflowClass);
      }
    }

    const resizeObserver = new ResizeObserver(() => {
      updateOverflowClasses();
    });

    resizeObserver.observe(document.body);
    updateOverflowClasses();
  }
}

// Register the custom elements
customElements.define('ethmarks-header', EthmarksHeader);
customElements.define('ethmarks-footer', EthmarksFooter);
` $header $footer -}}
{{- $resource := resources.FromString "js/ethmarks-components.js" $js -}}
{{- $resource.Publish -}}
